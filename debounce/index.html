<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-Type" content="text/html;charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="content-language" content="zh-CN">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1.0,minimum-scale=1.0,user-scalable=0">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="author" content="me">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>防抖/节流</title>
    <style>
        button {
            width: 400px;
            height: 60px;
            border: 1px solid lightcoral;
            background: lightseagreen;
        }
    </style>
</head>

<body>
    <button id="btn">点击</button>
    <script src="./debounce.js"></script>
    <!-- <script src="./debounce.1.js"></script> -->
    <script src="./throttle.js"></script>
    <script>
        let btn = document.getElementById('btn');
        //简易版
        // function throttle(func, wait) {
        //     let previous = 0;
        //     return function () {
        //         let now = Date.now();
        //         if(now - previous > wait){
        //             func.apply(this,arguments);
        //             previous = now;
        //         }
        //     }
        // }
        //underscore
        // function throttle(func,wait,opts){
        //     let args,context,previous=0,timeout;
        //     let later = function(){
        //         previous = opts.leading === false ? 0 : Date.now();
        //         timeout = null;
        //         func.apply(context,args);
        //         args = context = null;
        //     }
        //     let throttled = function () {
        //         args = arguments;
        //         context = this;
        //         let now = Date.now();
        //         if (!previous && opts.leading === false) {
        //             previous = now;
        //         }
        //         let remaining = wait - (now - previous);
        //         if (remaining <= 0) {
        //             if (timeout) {
        //                 clearTimeout(timeout);
        //                 timeout = null;
        //             }
        //             func.apply(context,args);
        //             previous = now;
        //             args = context = null;
        //         }else if(!timeout && opts.trailing !== false){
        //             timeout = setTimeout(later,remaining);
        //             console.log(1);
                    
        //         }
        //     }
        //     return throttled;
        // }

        // function debounce(func,wait,immediate){
        //     let timeout;
        //     return function () {
        //         clearTimeout(timeout);
        //         if (immediate) {
        //             let callNow = !timeout;
        //             if (callNow) {
        //                 func.apply(this,arguments);
        //             }
        //         }
        //         timeout = setTimeout(() => {
        //             func.apply(this,arguments);
        //             timeout = null;
        //         }, wait);
        //     }
        // }

        function logger() {
            console.log('logger');
        }
        // btn.addEventListener('click',logger);
        btn.addEventListener('click', throttle(logger, 1000))
        //保留最后一次点击
        // btn.addEventListener('click', throttle(logger, 1000,{trailing:true}))
        //第一次点击延迟
        // btn.addEventListener('click', throttle(logger, 1000,{leading:false}))
        // btn.addEventListener('click',debounce(logger,1000))
        //第一次点击立即触发
        // btn.addEventListener('click',debounce(logger,1000,true))
    </script>
</body>

</html>